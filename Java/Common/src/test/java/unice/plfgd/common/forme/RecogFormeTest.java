package unice.plfgd.common.forme;

import org.junit.Test;

import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import static org.junit.Assert.assertEquals;

public class RecogFormeTest {

	String c;
	List<Point> lc;
	String t;
	List<Point> lt;

	public static List<Point> convertToPts(String forme) {
		Pattern pattern = Pattern.compile("[0-9]+.[0-9]+");
		Matcher matcher = pattern.matcher(forme);

		List<Double> listNb = new ArrayList<>();

		while(matcher.find()) {
			listNb.add(Double.valueOf(matcher.group()));
		}
		List<Point> listPts = new ArrayList<>();
		for(int i = 0; i < listNb.size()-1; i+=2){
			listPts.add(new Point(listNb.get(i), listNb.get(i+1)));
		}
		return listPts;
	}

	@org.junit.Before
	public void setUp() throws Exception {
		c = "[[65.1547425545302;21.639598189317674], [64.38560059139925;21.639598189317674], [62.16572669795162;21.639598189317674], [58.329455484479865;21.639598189317674], [53.128768613674495;21.639598189317674], [46.75325739303691;20.912091897371365], [36.40841285654363;19.737267547539147], [33.72362038699839;19.289949489653242], [32.831745873094945;19.068748252237135], [32.35907330609008;19.537315966032228], [31.93277448615772;20.824273640677433], [30.98160916526846;23.10347589070365], [29.970893603843333;25.727468742353537], [29.08173631501678;28.462427467841163], [27.802838148420022;31.271498848661214], [27.015199597249897;33.60366309249161], [26.284769557466447;35.37687775272651], [25.557263265520135;38.33333469877307], [25.333604236577184;40.191227104306485], [25.333604236577184;41.76800960395693], [25.10994520763423;44.08184281931627], [25.10994520763423;44.54005025910584], [25.10994520763423;44.79690995525727], [25.10994520763423;44.964039779082775], [27.683252936241615;45.18524101649888], [32.15643351510067;45.411357836968676], [37.07938994337248;45.411357836968676], [42.28007681417785;45.411357836968676], [46.30593933515101;45.411357836968676], [51.81642058711724;45.411357836968676], [53.37945993581341;45.411357836968676], [54.81447565475566;45.411357836968676], [55.911015930858504;45.411357836968676], [56.768402850601234;45.63255907438479], [56.98873020658557;45.63255907438479], [57.157088926174495;45.63255907438479], [57.582757937028106;45.63255907438479], [58.46832070574664;45.63255907438479], [58.92575667208473;45.816121965446726], [59.70054814212808;45.91274730844519], [60.038091672346894;45.91274730844519], [60.455445155201346;45.73892682990772], [61.350081270973156;43.95304771611087], [62.301246591862416;40.933261675055924], [63.252411912751676;32.488289988814316], [63.252411912751676;28.68854428831096], [63.47607094169463;23.909771469082074], [63.47607094169463;22.397226081865213], [63.47607094169463;21.502043790198545], [63.47607094169463;21.079221721196866], [63.47607094169463;20.912091897371365], [63.47607094169463;20.552370212222105], [63.756259175755034;20.0285909426559], [63.756259175755034;19.502804476676104], [63.756259175755034;19.227801500017478], [63.97991820469799;18.742554939833262], [63.97991820469799;18.422591446230076], [63.97991820469799;18.24270158806103], [63.97991820469799;18.11512513982103]]";
		lc = convertToPts(c);
		t = "[[37.07938994337248;38.583612975391496], [37.80443844379195;38.583612975391496], [41.83275875629195;38.583612975391496], [47.70442271392618;39.03584661633109], [54.52725199244966;39.31111926733781], [61.1264222420302;39.31111926733781], [70.95833934126819;39.31111926733781], [73.54453682099413;39.31111926733781], [74.2129332267198;39.31111926733781]], [[71.25006554110738;39.75843732522371], [71.25006554110738;39.43493051550266], [71.55261967806209;38.809729795861294], [71.53025377516778;38.38115922556627], [71.53025377516778;37.712394151111575], [71.75391280411074;36.70618112721966], [72.20123086199663;35.0211602196064], [72.20123086199663;32.00512231062989], [72.20123086199663;28.166857555141917], [71.9775718330537;23.857065495228607], [71.53025377516778;21.865715009787472], [70.07524119127517;18.103023930150655], [69.85158216233222;16.633803945793133], [69.40426410444631;15.154244169026146], [69.12407587038591;14.301158384455396], [68.71358372221057;13.140555089485458], [68.6767578125;12.336689993839135], [68.45309878355704;12.171857522371365], [68.45309878355704;11.739613919183444]], [[68.22943975461409;11.29229586129754], [67.63295423264472;11.385951372867728], [66.77411994678062;11.966116476378984], [65.82571964135906;12.693237031599551], [64.09981064081725;13.970687832074944], [61.350081270973156;15.991593260626397], [55.47841731333893;19.51606631012304], [48.43192900587248;24.21044812639821], [41.10525246434564;29.189933759787472], [36.148231728231615;33.41944479035584], [34.5060822147651;35.508560760975946], [33.10759883598993;37.22249485502307], [32.60375157298658;37.97408067673378], [32.38009254404363;37.905917925055924], [31.884035114740634;39.03584661633109], [31.709115457214768;39.44875559284116]], [[38.3082857067953;38.583612975391496], [37.83103720987137;38.583612975391496], [37.6983642578125;38.583612975391496], [37.58077941484899;38.583612975391496], [37.35712038590604;38.809729795861294], [37.07938994337248;38.809729795861294], [36.85573091442953;38.809729795861294], [36.63207188548658;38.809729795861294], [36.27736989817097;38.809729795861294], [35.88345077480513;38.809729795861294], [35.56907705012584;38.809729795861294], [35.12175899223993;38.809729795861294], [34.967993409841654;38.809729795861294], [34.535698602663594;38.809729795861294], [34.5060822147651;38.809729795861294], [34.282423185822154;38.809729795861294], [34.05876415687919;38.809729795861294]]";
		lt = convertToPts(t);
	}


	@Test
	public void process() {

		System.out.println("AAAAAAAAAAAA : " + RecogForme.process(lc).get(0));
		System.out.println("BBBBBBBBBBBB : " + RecogForme.process(lt));
		assertEquals(Forme.RECTANGLE, RecogForme.process(lc).get(0));
		assertEquals(Forme.TRIANGLE, RecogForme.process(lt).get(0));
	}

	@Test
	public void recog() {
	}
}
